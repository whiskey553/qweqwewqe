"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var e={exports:{}},t=e.exports=function(){var e={903:function(e,t){!function(){var e={};!function(){var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.imUlid=void 0;var o="0123456789ABCDEFGHJKMNPQRSTVWXYZ";t.imUlid=function(){for(var e,t=Date.now(),n="",i=10;i--;)n=o[e=t%32]+n,t=(t-e)/32;i=16;var r=new Uint8Array(i);("crypto"in window?crypto:msCrypto).getRandomValues(r);for(;i--;)n+=o[31&r[i]];return n}}();var o=t;for(var n in e)o[n]=e[n];e.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})}()}},t={};function o(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){var o=function(e,o){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,o||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(e,"string");return"symbol"==t(o)?o:String(o)}function r(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function a(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,o){return(t=i(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.r(n),o.d(n,{IMUID:function(){return U},IMUIDRequest:function(){return A}});var c=o(903);function s(e){for(var t=e+"=",o=t.length,n=document.cookie.split("; "),i=0,r=n.length,a=void 0;i<r;i++)if((a=n[i]).substr(0,o)===t)return a.slice(o);return null}function d(e,t,o){void 0===o&&(o={});var n=o.path,i=o.domain,r=o.maxAge,a=o.expires,u=o.secure,c=o.sameSite,s=e+"="+t;n&&(s+=";path="+n),i&&(s+=";domain="+i),"number"==typeof r&&(s+=";max-age="+r),a&&(s+=";expires="+a.toUTCString()),u&&(s+=";secure"),c&&(s+=";samesite="+c),document.cookie=s}function l(e){return localStorage?localStorage.getItem(e):null}function f(e,t){try{localStorage.setItem(e,t)}catch(o){console.error(o)}}function p(e){localStorage&&localStorage.removeItem(e)}function v(e,t,o){return void 0===o&&(o={}),function(e,t,o){void 0===o&&(o={});var n=o.onError,i=o.onTimeout,r=o.timeout,a=o.withCredentials,u=new XMLHttpRequest;return u.onload=function(){t(u.responseText)},n&&(u.onerror=function(){n()}),i&&(u.ontimeout=function(){i()}),u.withCredentials=!!a,u.open("GET",e,!0),"number"==typeof r&&(u.timeout=r),u.send(),u}(e,(function(e){t(JSON.parse(e))}),o)}var m,y=((m=y||{}).READY="ready",m.LOADING="loading",m.DONE="done",m.EXPIRED="expired",m.LOADING_IN_BACKGROUND="loadingInBackground",m),h="none",b="optout",w="https",g="timeout",I="_im_vid",D="_im_uid_expire",S="_im_uid_status",k="_im_uid",E=function(e){var t,o="."+location.hostname,n=location.protocol===w;void 0===(t={domain:o,path:"/",secure:n,sameSite:n?h:"lax"})&&(t={}),d(e,"",{maxAge:0,path:t.path,domain:t.domain,secure:t.secure,sameSite:t.sameSite})},O=function(){function t(){e(this,t),u(this,"processorMap",{})}return a(t,[{key:"run",value:function(e){"customerId"in e&&"callback"in e?this.processIMUIDRequest(e):"optout"in e&&this.processOptoutRequest(e)}},{key:"processIMUIDRequest",value:function(e){var t=e.customerId;t in this.processorMap||(this.processorMap[t]=new R({cid:t})),this.processorMap[t].processIMUIDRequest(e)}},{key:"processOptoutRequest",value:function(e){e.optout?t.vid=b:t.vid===b&&t.reacreateVid()}},{key:"get",value:function(e){var t;return(null===(t=this.processorMap[e])||void 0===t?void 0:t.uid)||""}}],[{key:"vid",get:function(){var e=s(I);return e||(e=(0,c.imUlid)(),t.vid=e),e},set:function(e){e?function(e,t){var o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="."+location.hostname,r=location.protocol===w,a=n.extendExpireSeconds;a&&(o=new Date).setTime(o.getTime()+1e3*a),d(e,t,{domain:i,path:"/",secure:r,sameSite:r?h:"lax",expires:o})}(I,e,{extendExpireSeconds:2592e3}):E(I)}},{key:"reacreateVid",value:function(){t.vid=null;var e=t.vid;t.vid=e}},{key:"extendExpireToVid",value:function(){var e=t.vid;t.vid=e}}]),t}(),R=function(){function t(o){e(this,t),u(this,"cid",void 0),this.cid=o.cid}return a(t,[{key:"uidExpireTime",get:function(){var e=this.cid,t=l("".concat(D,".").concat(e));return"string"==typeof t?parseInt(t||"0"):null},set:function(e){var t=this.cid,o="".concat(D,".").concat(t);"number"==typeof e?f(o,e+""):p(o)}},{key:"uidLoadStatus",get:function(){var e=this.cid,t=l("".concat(S,".").concat(e));return null===t?y.READY:t},set:function(e){var t=this.cid;f("".concat(S,".").concat(t),e)}},{key:"uid",get:function(){var e=this.cid;return l("".concat(k,".").concat(e))},set:function(e){var t=this.cid,o="".concat(k,".").concat(t);e?f(o,e):p(o)}},{key:"processIMUIDRequest",value:function(e,t){var o=this;t||(t=Date.now());var n=e.callbackTimeout,i=void 0===n?1e3:n,r=e.callback,a=e.loopbacks;O.extendExpireToVid();var u=O.vid,c=u===b;if(c)r({uid:"",vid:"",optouted:c,status:y.DONE,loopbacks:a});else{var s=this.uidExpireTime,d=this.cid,l=this.uidLoadStatus,f=Date.now();"number"==typeof s&&f>=s&&(l=y.EXPIRED);var p=e.SYNC_URL||"https://audiencedata.im-apps.net/imuid/get";switch(p+="?cid="+d+"&vid="+u,l){default:case y.READY:this.uidLoadStatus=y.LOADING,this.uidExpireTime=f+18e5,v(p,(function(e){var t=e.uid;o.uid=t,o.uidLoadStatus=y.DONE,r({uid:t,vid:u,optouted:!1,status:y.DONE,loopbacks:a})}),{withCredentials:!0,timeout:i,onTimeout:function(){o.uidLoadStatus=y.READY,r({uid:"",vid:"",optouted:!1,status:g,loopbacks:a})}});break;case y.LOADING:if(f>=t+i)return this.uidLoadStatus=y.READY,void r({uid:"",vid:"",optouted:!1,status:g,loopbacks:a});setTimeout((function(){o.processIMUIDRequest(e,t)}),9);break;case y.DONE:r({uid:this.uid||"",vid:u,optouted:c,status:y.DONE,loopbacks:a});break;case y.EXPIRED:this.uidLoadStatus=y.LOADING_IN_BACKGROUND,this.uidExpireTime=f+18e5,v(p,(function(e){var t=e.uid;o.uid=t,o.uidLoadStatus=y.DONE}),{withCredentials:!0}),r({uid:this.uid||"",vid:u,optouted:!1,status:y.DONE,loopbacks:a});break;case y.LOADING_IN_BACKGROUND:r({uid:this.uid||"",vid:u,optouted:!1,status:y.DONE,loopbacks:a})}}}}]),t}(),x=window.IMUID;x||(x=new O);var N=window.IMUIDRequest;(N instanceof Array||!N)&&(window.IMUIDRequest={push:function(e){x.run(e)}}),N instanceof Array&&N.forEach((function(e){x.run(e)}));var U=x,A=window.IMUIDRequest}(),n}();async function o(e,...t){}async function n(e,t){const n="https://b6.im-apps.net/livedoor";o(0);const i=function(e){return Object.keys(e).map((t=>"object"==typeof e[t]?`${encodeURIComponent(t)}=${encodeURIComponent(JSON.stringify(e[t]))}`:e[t]?`${encodeURIComponent(t)}=${encodeURIComponent(String(e[t]))}`:void 0)).filter(Boolean).join("&")}(t);return fetch(n,{method:e,body:i,mode:"cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}async function i(e){return n("POST",e)}async function r(e,t){if(e.method)switch(o(0,e.method),e.method){case"pageview":o(0),async function(e){i({...e})}({method:"pageview",...t,user:e.userId,data:e.data});break;case"event":if(o(0),!e.category){console.warn('event "category" param is required');break}!async function(e){i({...e})}({method:"event",...t,user:e.userId,data:e.data,category:e.category,act:e.action,name:e.name,val:e.value})}else o()}o(),t.IMUID.run({customerId:1017406,callback:e=>{o(0),async function(e,t){const n=t.site;o(),Array.isArray(window[e])&&(o(0,window[e]),window[e].map((e=>{r(e,t)})));window[e]={id:n,push:e=>{r(e,t)}}}("livedoorCdpRequest",{url:window.location.href,ref:document.referrer,title:document.title,kw:document.querySelector('meta[name="keywords"]')?.getAttribute("content")??"",desc:document.querySelector('meta[name="description"]')?.getAttribute("content")??"",site:"GKWANY",vid:e.vid,uid:e.uid})}});
